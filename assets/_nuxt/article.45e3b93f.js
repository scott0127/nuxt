import{t as Q,u as W,a as X,b as $,c as ee,_ as te}from"./Input.f7a0c4dd.js";import ae from"./ContentDoc.2c180430.js";import{_ as F,m as oe,a as M,d as ne,t as re,l as le,b as se,c as ie,e as de,g as ue}from"./entry.b337e9e0.js";import{k as ce,d as Y,t as H,a as v,$ as L,w as ge,n as me,c as fe,F as _,G as k,K as c,M as pe,a0 as G,H as j,p as z,a1 as b,Z,Y as A,P as f,a2 as he,a3 as be,I as ve,J as _e,a4 as J,u as q,O as I,N as P,a5 as R}from"./swiper-vue.c555b90e.js";import{_ as ye}from"./FormGroup.c42a670b.js";import"./Icon.934917f6.js";import"./index.df58e121.js";import"./vue.f36acd1f.71fad4d0.js";import"./ContentRenderer.36db29bc.js";import"./ContentRendererMarkdown.vue.ff8bc67b.js";import"./index.4e8c8a1d.js";import"./preview.80d06269.js";import"./ContentQuery.a1733c88.js";import"./asyncData.649e159b.js";import"./query.d0ea0b58.js";import"./index.c9d4dc9e.js";const C=new Map;function De(e){const a=ce();function o(s){var g;const n=C.get(e)||new Set;n.add(s),C.set(e,n);const i=()=>r(s);return(g=a==null?void 0:a.cleanups)==null||g.push(i),i}function l(s){function g(...n){r(g),s(...n)}return o(g)}function r(s){const g=C.get(e);g&&(g.delete(s),g.size||t())}function t(){C.delete(e)}function d(s,g){var n;(n=C.get(e))==null||n.forEach(i=>i(s,g))}return{on:o,once:l,off:r,emit:d,reset:t}}const x=oe(M.ui.strategy,M.ui.textarea,Q),we=Y({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(x.size).includes(e)}},color:{type:String,default:()=>x.default.color,validator(e){return[...M.ui.colors,...Object.keys(x.color)].includes(e)}},variant:{type:String,default:()=>x.default.variant,validator(e){return[...Object.keys(x.variant),...Object.values(x.color).flatMap(a=>Object.keys(a))].includes(e)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur"],setup(e,{emit:a}){const{ui:o,attrs:l}=W("textarea",H(e,"ui"),x,H(e,"class")),{emitFormBlur:r,emitFormInput:t,inputId:d,color:s,size:g,name:n}=X(e,x),i=v(ne({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),m=v(null),y=()=>{var u;e.autofocus&&((u=m.value)==null||u.focus())},p=()=>{if(e.autoresize){if(!m.value)return;m.value.rows=e.rows;const u=window.getComputedStyle(m.value),h=parseInt(u.paddingTop),N=parseInt(u.paddingBottom),B=h+N,T=parseInt(u.lineHeight),{scrollHeight:K}=m.value,U=(K-B)/T;U>e.rows&&(m.value.rows=U)}},S=u=>{i.value.trim&&(u=u.trim()),i.value.number&&(u=le(u)),a("update:modelValue",u),t()},D=u=>{p(),i.value.lazy||S(u.target.value)},w=u=>{const h=u.target.value;i.value.lazy&&S(h),i.value.trim&&(u.target.value=h.trim())},V=u=>{a("blur",u),r()};L(()=>{setTimeout(()=>{y()},e.autofocusDelay)}),ge(()=>e.modelValue,()=>{me(p)}),L(()=>{setTimeout(()=>{y(),p()},100)});const O=fe(()=>{var h,N;const u=((N=(h=o.value.color)==null?void 0:h[s.value])==null?void 0:N[e.variant])||o.value.variant[e.variant];return $(re(o.value.base,o.value.rounded,o.value.placeholder,o.value.size[g.value],e.padded?o.value.padding[g.value]:"p-0",u==null?void 0:u.replaceAll("{color}",s.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:o,attrs:l,name:n,inputId:d,textarea:m,textareaClass:O,onInput:D,onChange:w,onBlur:V}}}),xe=["id","value","name","rows","required","disabled","placeholder"];function Te(e,a,o,l,r,t){return _(),k("div",{class:j(e.ui.wrapper)},[c("textarea",pe({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:["form-textarea",e.textareaClass]},e.attrs,{onInput:a[0]||(a[0]=(...d)=>e.onInput&&e.onInput(...d)),onBlur:a[1]||(a[1]=(...d)=>e.onBlur&&e.onBlur(...d)),onChange:a[2]||(a[2]=(...d)=>e.onChange&&e.onChange(...d))}),null,16,xe),G(e.$slots,"default")],2)}const ke=F(we,[["render",Te]]);class E extends Error{constructor(a){super(a),this.message=a,Object.setPrototypeOf(this,E.prototype)}}const Se=Y({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:a,emit:o}){const l=De(`form-${ee()}`);l.on(async n=>{var i;n.type!=="submit"&&((i=e.validateOn)!=null&&i.includes(n.type))&&await s(n.path,{silent:!0})});const r=v([]);z("form-errors",r),z("form-events",l);const t=v({});z("form-inputs",t);async function d(){let n=await e.validate(e.state);if(e.schema)if(Ve(e.schema))n=n.concat(await Oe(e.state,e.schema));else if(Ne(e.schema))n=n.concat(await Ee(e.state,e.schema));else if(Be(e.schema))n=n.concat(await Ie(e.state,e.schema));else if(Me(e.schema))n=n.concat(await je(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return n}async function s(n,i={silent:!1}){if(n){const m=r.value.filter(p=>p.path!==n),y=(await d()).filter(p=>p.path===n);r.value=m.concat(y)}else r.value=await d();if(!i.silent&&r.value.length>0)throw new E(`Form validation failed: ${JSON.stringify(r.value,null,2)}`);return e.state}async function g(n){var i;try{(i=e.validateOn)!=null&&i.includes("submit")&&await s();const m={...n,data:e.state};o("submit",m)}catch(m){if(!(m instanceof E))throw m;const y={...n,errors:r.value.map(p=>({...p,id:t.value[p.path]}))};o("error",y)}}return a({validate:s,errors:r,setErrors(n,i){r.value=n,i?r.value=r.value.filter(m=>m.path!==i).concat(n):r.value=n},getErrors(n){return n?r.value.filter(i=>i.path===n):r.value},clear(n){n?r.value=r.value.filter(i=>i.path===n):r.value=[]}}),{onSubmit:g}}});function Ne(e){return e.validate&&e.__isYupSchema__}function Ce(e){return e.inner!==void 0}async function Ee(e,a){try{return await a.validate(e,{abortEarly:!1}),[]}catch(o){if(Ce(o))return o.inner.map(l=>({path:l.path??"",message:l.message}));throw o}}function Ve(e){return e.parse!==void 0}async function Oe(e,a){const o=await a.safeParseAsync(e);return o.success===!1?o.error.issues.map(l=>({path:l.path.join("."),message:l.message})):[]}function Be(e){return e.validateAsync!==void 0&&e.id!==void 0}function ze(e){return e.isJoi===!0}async function Ie(e,a){try{return await a.validateAsync(e,{abortEarly:!1}),[]}catch(o){if(ze(o))return o.details.map(l=>({path:l.path.join("."),message:l.message}));throw o}}function Me(e){return e._parse!==void 0}async function je(e,a){const o=await a._parse(e);return o.issues?o.issues.map(l=>({path:l.path.map(r=>r.key).join("."),message:l.message})):[]}function Ae(e,a,o,l,r,t){return _(),k("form",{onSubmit:a[0]||(a[0]=b((...d)=>e.onSubmit&&e.onSubmit(...d),["prevent"]))},[G(e.$slots,"default")],32)}const Fe=F(Se,[["render",Ae]]),Ue=["id"],He=c("svg",{class:"w-2 h-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[c("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Le=c("span",{class:"sr-only"},"Remove badge",-1),Je=[He,Le],qe={__name:"TagCompo",props:{id:Number,bgcolor:String,decolor:String,name:String},emits:["deleteTag","doNothing"],setup(e,{emit:a}){const o=e;return(l,r)=>(_(),k("span",{id:o.id,draggable:"true",class:j(["inline-flex items-center px-2 py-1 me-2 text-sm font-medium rounded",e.bgcolor])},[Z(A(o.name)+" ",1),c("button",{type:"button",class:j(["inline-flex items-center p-1 ms-2 text-sm bg-transparent rounded-sm hover:animate-spin",e.decolor]),"data-dismiss-target":"#badge-dismiss-default","aria-label":"Remove",onClick:r[0]||(r[0]=t=>l.$emit("deleteTag",o.id.toString())),onDblclick:r[1]||(r[1]=b(t=>l.$emit("doNothing"),["stop"]))},Je,34)],10,Ue))}},Pe=qe;const Re={data(){return{selectedCategories:new Map}},methods:{dragStart(e){const a=e.target;e.dataTransfer.setData("text/plain",a.outerHTML),e.dataTransfer.setData("text/id",a.id)},dragOver(e){e.preventDefault()},drop(e){e.preventDefault();const a=e.dataTransfer.getData("text/plain"),o=e.dataTransfer.getData("text/id"),l={id:o,html:a};this.selectedCategories.set(o,l),console.log(this.selectedCategories)},deleteTag(e){console.log(e),this.selectedCategories.delete(e)},add(e){const a=e.target,o=a.id;console.log("id:",o);const l={id:o,html:a.outerHTML};this.selectedCategories.set(o,l)},donothing(){}}},Ye=e=>(ve("data-v-7dd74d10"),e=e(),_e(),e),Ge={class:"mt-4 flex flex-col space-y-4 w-1/2"},Ze={class:"flex flex-col space-y-2 border-2 border-blue-700"},Ke=Ye(()=>c("div",null,"文章分類",-1)),Qe={class:"flex space-x-2"},We={class:"flex space-x-2"},Xe={class:"flex flex-col space-y-2 mt-4"},$e={class:"selected-categories"},et=["innerHTML"];function tt(e,a,o,l,r,t){const d=Pe;return _(),k("div",null,[c("div",Ge,[c("div",Ze,[Ke,c("div",Qe,[f(d,{id:1,bgcolor:"bg-blue-500 text-white",decolor:"text-white hover:bg-blue-200 hover:text-blue-900",name:"Facebook",onDeleteTag:t.deleteTag,onDoNothing:t.donothing,onDblclick:b(t.add,["stop"]),onDragstart:t.dragStart},null,8,["onDeleteTag","onDoNothing","onDblclick","onDragstart"]),f(d,{id:2,bgcolor:"bg-green-400 text-black",decolor:"hover:bg-green-700 hover:text-green-300 text-white",name:"Vue",onDeleteTag:t.deleteTag,onDoNothing:t.donothing,onDblclick:b(t.add,["stop"]),onDragstart:t.dragStart},null,8,["onDeleteTag","onDoNothing","onDblclick","onDragstart"]),f(d,{id:3,bgcolor:"bg-red-600 text-yellow-300 font-black",decolor:"hover:bg-yellow-300 hover:text-black-500 text-black",name:"Macdonald",onDeleteTag:t.deleteTag,onDoNothing:t.donothing,onDblclick:b(t.add,["stop"]),onDragstart:t.dragStart},null,8,["onDeleteTag","onDoNothing","onDblclick","onDragstart"]),f(d,{id:4,bgcolor:"bg-green-500 text-white",decolor:"hover:bg-green-200 hover:text-green-900",name:"Nuxt",onDeleteTag:t.deleteTag,onDoNothing:t.donothing,onDblclick:b(t.add,["stop"]),onDragstart:t.dragStart},null,8,["onDeleteTag","onDoNothing","onDblclick","onDragstart"]),f(d,{id:5,bgcolor:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white",decolor:"hover:bg-pink-500 hover:text-white",name:"instagram",onDeleteTag:t.deleteTag,onDoNothing:t.donothing,onDblclick:b(t.add,["stop"]),onDragstart:t.dragStart},null,8,["onDeleteTag","onDoNothing","onDblclick","onDragstart"])]),c("div",We,[f(d,{id:6,bgcolor:"bg-indigo-100",name:"Nuxt",onDeleteTag:t.deleteTag,onDoNothing:t.donothing,onDblclick:b(t.add,["stop"]),onDragstart:t.dragStart},null,8,["onDeleteTag","onDoNothing","onDblclick","onDragstart"]),f(d,{id:7,bgcolor:"bg-purple-100",name:"Nuxt",onDeleteTag:t.deleteTag,onDoNothing:t.donothing,onDblclick:b(t.add,["stop"]),onDragstart:t.dragStart},null,8,["onDeleteTag","onDoNothing","onDblclick","onDragstart"]),f(d,{id:8,bgcolor:"bg-pink-100",name:"Nuxt",onDeleteTag:t.deleteTag,onDoNothing:t.donothing,onDblclick:b(t.add,["stop"]),onDragstart:t.dragStart},null,8,["onDeleteTag","onDoNothing","onDblclick","onDragstart"]),f(d,{id:9,bgcolor:"bg-blue-100",name:"Nuxt",onDeleteTag:t.deleteTag,onDoNothing:t.donothing,onDblclick:b(t.add,["stop"]),onDragstart:t.dragStart},null,8,["onDeleteTag","onDoNothing","onDblclick","onDragstart"])])])]),c("div",Xe,[c("div",{class:"dropzone bg-gray-200 p-4 rounded cursor-pointer",onDragover:a[0]||(a[0]=(...s)=>t.dragOver&&t.dragOver(...s)),onDrop:a[1]||(a[1]=(...s)=>t.drop&&t.drop(...s))},[Z(" 放置區域 "),c("div",$e,[(_(!0),k(he,null,be(r.selectedCategories.values(),s=>(_(),k("div",{key:s.id,class:"selected-category flex space-x-2"},[c("div",{innerHTML:s.html},null,8,et)]))),128))])],32)])])}const at=F(Re,[["render",tt],["__scopeId","data-v-7dd74d10"]]),ot={class:"bg-white py-24 w-11/12 mt-40"},nt={class:"flex flex-col items-center"},rt=c("h1",{class:"text-6xl font-semibold text-yellow-400"}," 大家好！我是 pakkkk ",-1),lt={class:"border-2 border-green-500 w-4/5 flex flex-col items-center"},xt={__name:"article",async setup(e){let a,o;const l=se(),r=ie(l,"Article"),t=([a,o]=J(()=>ue(r)),a=await a,o(),a),d=Array.from(t.docs).map(D=>({...D.data(),id:D.id})),s=v(!1),g=v(null),n=()=>{s.value=!s.value,g.value.innerText=s.value?"Close":"Create Article"},i=v(""),m=v(""),y=de(),{data:{user:p}}=([a,o]=J(()=>y.auth.getUser()),a=await a,o(),a),S=v("/blog");return(D,w)=>{const V=te,O=ae,u=ke,h=ye,N=Fe,B=at;return _(),k("div",ot,[c("div",nt,[rt,f(V,{class:"w-56 ml-8 my-4",modelValue:S.value,"onUpdate:modelValue":w[0]||(w[0]=T=>S.value=T),color:"cyan",placeholder:"部落格測試"},null,8,["modelValue"]),c("main",lt,[f(O,{path:S.value},null,8,["path"])]),c("p",null,"用戶有:"+A(q(p).email),1),c("button",{ref_key:"openA",ref:g,class:"border-4 border-amber-700 border-dashed text-amber-700 hover:text-black hover:border-black font-Playpen font-bold py-2 rounded inline-flex items-center mb-4 justify-center",style:{width:"210px",height:"55px"},onClick:n}," - Create Article - ",512),f(N,{schema:D.schema,state:D.state,class:"space-y-4 border-2 border-black w-1/2",onSubmit:D.onSubmit},{default:I(()=>[f(h,{label:"文章標題"},{default:I(()=>[s.value?(_(),P(u,{key:0,modelValue:i.value,"onUpdate:modelValue":w[1]||(w[1]=T=>i.value=T),rows:1,variant:"outline",class:"w-[300px] mb-4",color:"red",placeholder:"這裡輸入文章標題喔",autoresize:""},null,8,["modelValue"])):R("",!0)]),_:1}),f(h,{label:"建立文章內容"},{default:I(()=>[s.value?(_(),P(u,{key:0,modelValue:m.value,"onUpdate:modelValue":w[2]||(w[2]=T=>m.value=T),variant:"outline",class:"w-[500px]",color:"indigo",placeholder:"這裡輸入文章內容喔",autoresize:""},null,8,["modelValue"])):R("",!0)]),_:1}),f(h,{label:"文章分類清單"})]),_:1},8,["schema","state","onSubmit"]),f(B),c("div",null,[c("pre",null,A(q(d)[0]),1)])])])}}};export{xt as default};
